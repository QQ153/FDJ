<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>放大镜</title>
	<style type="text/css">
		
		img{
			border: none;
		}
		#xiao{
			width: 365px;
			/*height: 228px;*/
			position: relative;
			margin-top: 50px;
		}
		#xiao img{
			width: 100%;
		}
		#kuai{
			width: 140px;
			height: 88px;
			position: absolute;
			display: none;
			background: rgba(240,240,0,0.4);
		}
		#da{
			width: 700px;
			height: 440px;
			overflow: hidden;
			position: absolute;
			left: 450px;
			top: 50px;
		}
		#datupain{
			display: none;
			position: absolute;
			width: 1825px;
		}
	</style>
</head>
<body>
	<div id="xiao">
		<img src="img/img4.jpg" alt="" id="xiaotupian"/>
		<div id="kuai"></div>
	</div>
	
	<div id="da">
		<img src="img/img4.jpg" alt="" id="datupain"/>
	</div>
	
	<script type="text/javascript">
		var huangkuai = document.getElementById('kuai');
		var xiaoTu = document.getElementById('xiao');
		var daTu = document.getElementById('datupain');
		
		xiaoTu.onmousemove = function(e){
			var e = e||window.event;
			kuai.style.display = "block";
			datupain.style.display = "block"
			var leftPos = e.clientX - huangkuai.clientWidth/2 -xiaoTu.offsetLeft;
			var tabPos = e.clientY - huangkuai.clientHeight/2 -xiaoTu.offsetTop;
			console.log(leftPos,tabPos)
			
			if(leftPos<=0){
				leftPos=0;
			}else if(leftPos>= xiaoTu.clientWidth-huangkuai.offsetWidth){
				leftPos = xiaoTu.clientWidth-huangkuai.offsetWidth;
//				console.log(xiaoTu.clientWidth-huangkuai.offsetWidth);
			}
			if(tabPos<=0){
				tabPos=0;
			}else if(tabPos>= xiaoTu.clientHeight-huangkuai.offsetHeight){
				tabPos = xiaoTu.clientHeight-huangkuai.offsetHeight;
			}
			
			kuai.style.left = leftPos + "px";
			kuai.style.top = tabPos + "px";
			//放大
			datupain.style.left = -leftPos*(datupain.offsetWidth/xiaotupian.offsetWidth) +"px";
			datupain.style.top = -tabPos*(datupain.offsetWidth/xiaotupian.offsetWidth) +"px";
		}
		
		xiaoTu.onmouseout = function(){
			kuai.style.display = "none";
			datupain.style.display = "none"
		}
		
		
		
	</script>
</body>
</html>